## 기능 요구사항

#### 랜덤 동전을 생성한다.

* 자판기가 보유하고 있는 금액으로 동전을 무작위 생성
    * 투입 금액으로는 동전을 생성하지 않는다.

`CoinMachine`에서 사용자의 금액 입력에 따른 전체 동전리스트를 생성한다.
동전을 생성하는 로직은 `CoinGenerator`을 상속받은 객체에서 수행한다.

1. 코인이 500원 이상일 때는 500, 100, 50, 10원에서 랜덤으로 동전을 선택하여 반환한다.
2. 코인이 100원 이상일 때는 100, 50, 10원에서 랜덤으로 동전을 선택하여 반환한다.
3. 코인이 50원 이상일 때는 50, 10원에서 랜덤으로 동전을 선택하여 반환한다.
4. 코인이 50원 미만일 때는 10원에서 동전을 반환한다.

해당 로직을 전체 돈이 0원이 될때 까지 반복한다.
> 입력하는 금액은 10원 단위여야 한다.

### 상품을 입력한다.

상품 그자체인 데이터 클래스 `Product`와 상품들을 관리하는 클래스 `Products`로 나누어 관리한다.
유저는 상품명, 가격, 수량을 입력하여 상품을 추가할 수 있다.
> 상품명, 가격, 수량은 쉼표로, 개별 상품은 대괄호([])로 묶어 세미콜론(;)으로 구분한다.

상품입력의 파싱 및 검증은 `Products`의 동반객체 생성자에서 진행한다. (`parsingProduct()`)

### 상품을 구매할 수 있는지 확인한다.

1. 남은 금액이 상품의 최저 가격보다 적은지
2. 모든 상품이 소진된 경우

### 상품을 구매한다.

상품을 구매하여 재고를 하나 줄인다.

> 만약 해당 상품의 재고가 0이면 IllegalArgumentException을 발생시킨다.

### 잔돈을 반환한다.

* 잔돈을 반환할 수 없는 경우 잔돈으로 반환할 수 있는 금액만 반환한다.

* 잔돈을 돌려줄 때 현재 보유한 최소 개수의 동전으로 잔돈을 돌려준다.
    * 지폐를 잔돈으로 반환하는 경우는 없다고 가정한다.
* 반환되지 않은 금액은 자판기에 남는다.

---

### 사용자 플로우

1. 자판기가 보유하고 있는 금액을 입력한다.
2. 자판기가 보유한 동전을 출력한다.
3. 상품을 입력한다.
    * 상품명, 가격, 수량은 쉼표로, 개별 상품은 대괄호([])로 묶어 세미콜론(;)으로 구분한다.
    * 상품 가격은 100원부터 시작하며, 10원으로 나누어떨어져야 한다.

4. 투입 금액을 입력한다.
5. 구매할 상품을 **반복** 입력한다.
    * 종료 조건
      남은 금액이 상품의 최저 가격보다 적거나, 모든 상품이 소진된 경우 바로 잔돈을 돌려준다.

* 사용자가 잘못된 값을 입력할 경우 IllegalArgumentException를 발생시키고, "[ERROR]"로 시작하는 에러 메시지를 출력 후 그 부분부터 입력을 다시 받는다.
  Exception이 아닌 IllegalArgumentException, IllegalStateException 등과 같은 명확한 유형을 처리한다.
  아래의 프로그래밍 실행 결과 예시와 동일하게 입력과 출력이 이루어져야 한다.

## 입 출력 예시

### 입력 예

* 상품명, 가격, 수량은 쉼표로, 개별 상품은 대괄호([])로 묶어 세미콜론(;)으로 구분한다.

```
[콜라,1500,20];[사이다,1000,10]
```

### 출력 예시

* 자판기가 보유한 동전

```
500원 - 0개
100원 - 4개
50원 - 1개
10원 - 0개
```

* 잔돈은 반환된 동전만 출력

```
100원 - 4개
50원 - 1개
```

* 프로그래밍 실행 결과 예시

```
자판기가 보유하고 있는 금액을 입력해 주세요.
450

자판기가 보유한 동전
500원 - 0개
100원 - 4개
50원 - 1개
10원 - 0개

상품명과 가격, 수량을 입력해 주세요.
[콜라,1500,20];[사이다,1000,10]

투입 금액을 입력해 주세요.
3000

투입 금액: 3000원
구매할 상품명을 입력해 주세요.
콜라

투입 금액: 1500원
구매할 상품명을 입력해 주세요.
사이다

투입 금액: 500원
잔돈
100원 - 4개
50원 - 1개
```

* 에러 문구는 [ERROR]로 시작해야 한다.



